<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1" />
<title>hanbeam.kr</title>

<style>
:root{
  --maxW: 520px;
  --fontMain: "Presentation",-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;

  --glass-bg: rgba(255,255,255,0.15);
  --glass-border: rgba(255,255,255,0.16);

  /* âœ… ëª¨ë“  ê°„ê²© 3px í†µì¼ */
  --gap: 3px;

  --safeB: env(safe-area-inset-bottom);

  /* âœ… ìš´ì˜ì‚¬ ì •ë³´ í•˜ë‹¨ 3px ê³ ì • */
  --baseBottom: 3px;

  --infoH: 30px;
  --actionH: 92px;
  --branchH: 34.5px;
  --promoH: 113px;

  --bgOver: 24px;
}

*{box-sizing:border-box;}
html,body{height:100%;margin:0;}
body{
  background:#0b0b0b;
  font-family:var(--fontMain);
  overflow:hidden;
}

.wrap{
  width:100vw;height:100vh;height:100dvh;
  display:flex;align-items:center;justify-content:center;
  padding-top:env(safe-area-inset-top);
  padding-bottom:env(safe-area-inset-bottom);
}

.canvas{
  position:relative;
  width:min(100vw,var(--maxW));
  aspect-ratio:390/844;
  max-height:calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  border-radius:22px;
  overflow:hidden;
  background:#000;
}

/* ===== ë°°ê²½ ===== */
.bg{position:absolute;inset:0;z-index:0;overflow:hidden;background:#000;}
.bg img{
  position:absolute;
  top:calc(var(--bgOver)*-1);
  left:calc(var(--bgOver)*-1);
  width:calc(100% + (var(--bgOver)*2));
  height:calc(100% + (var(--bgOver)*2));
  object-fit:cover;
  object-position:top center;
  transform:translate3d(0,var(--bgShift,0px),0);
  will-change:transform;
  opacity:1;
}

/* ===== ìš´ì˜ì‚¬ ì •ë³´ ===== */
.infoBar{
  position:absolute;
  z-index:10;
  left:calc(16.5 / 390 * 100%);
  width:calc(357 / 390 * 100%);
  height:var(--infoH);
  bottom:calc(var(--baseBottom) + var(--safeB));
  border-radius:12px;
  background:rgba(0,0,0,0.42);
  border:1px solid rgba(255,255,255,0.14);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:11px;
  font-weight:900;
}

/* ===== ì•¡ì…˜ ===== */
.action-panel{
  position:absolute;
  z-index:10;
  left:calc(16.5 / 390 * 100%);
  width:calc(357 / 390 * 100%);
  height:var(--actionH);
  bottom:calc(var(--baseBottom) + var(--safeB) + var(--infoH) + var(--gap));
}

/* ===== ì§€ì  ===== */
.branch{
  position:absolute;
  z-index:10;
  left:calc(16.5 / 390 * 100%);
  width:calc(357 / 390 * 100%);
  height:var(--branchH);
  bottom:calc(
    var(--baseBottom) + var(--safeB)
    + var(--infoH) + var(--gap)
    + var(--actionH) + var(--gap)
  );
}

/* ===== í”„ë¡œëª¨ ===== */
.promoPanel{
  position:absolute;
  z-index:10;
  left:calc(16.5 / 390 * 100%);
  width:calc(357 / 390 * 100%);
  height:var(--promoH);
  bottom:calc(
    var(--baseBottom) + var(--safeB)
    + var(--infoH) + var(--gap)
    + var(--actionH) + var(--gap)
    + var(--branchH) + var(--gap)
  );
  background:transparent;
}

/* ===== ë„íŠ¸ ===== */
.dots{
  position:absolute;
  z-index:10;
  left:50%;
  transform:translateX(-50%);
  bottom:calc(
    var(--baseBottom) + var(--safeB)
    + var(--infoH) + var(--gap)
    + var(--actionH) + var(--gap)
    + var(--branchH) + var(--gap)
    + var(--promoH) + var(--gap)
  );
  display:flex;
  gap:6px;
}
.dot{width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,0.4);}
.dot.on{background:#fff;}

</style>
</head>

<body>
<div class="wrap">
<div class="canvas" id="canvas">

<div class="bg">
  <img id="bgImg" src="assets/bg1.webp" alt="">
</div>

<div class="dots" id="dots"></div>

<div class="promoPanel" id="promoPanel"></div>
<div class="branch"></div>
<div class="action-panel"></div>
<div class="infoBar">ê´‘ê³ ìš´ì˜ì‚¬ ì •ë³´ ë³´ê¸°</div>

</div>
</div>

<script>
/* =========================
   ğŸ”¥ 1168px ê¸°ì¤€ì„ "í”„ë¡œëª¨ ìƒë‹¨"ì— ì •í™•íˆ ì¼ì¹˜
========================= */
const DESIGN_REF_Y_RATIO = 1168 / 1688;

function applyBgFocus(){
  const canvas = document.getElementById("canvas");
  const promo  = document.getElementById("promoPanel");
  const img    = document.getElementById("bgImg");
  if(!canvas || !promo || !img) return;

  const ch = canvas.clientHeight;
  const cw = canvas.clientWidth;

  const over = parseFloat(getComputedStyle(document.documentElement)
                .getPropertyValue("--bgOver")) || 24;

  const targetY = promo.offsetTop; // âœ… í”„ë¡œëª¨ ìƒë‹¨

  const iw = img.naturalWidth;
  const ih = img.naturalHeight;
  if(!iw || !ih) return;

  const boxW = cw + over*2;
  const boxH = ch + over*2;

  const scale = Math.max(boxW/iw, boxH/ih);
  const dispH = ih * scale;

  const refY = dispH * DESIGN_REF_Y_RATIO;

  let shift = (targetY + over) - refY;

  const minShift = (ch + over) - dispH;
  const maxShift = over;

  if(shift < minShift) shift = minShift;
  if(shift > maxShift) shift = maxShift;

  img.style.setProperty("--bgShift", shift.toFixed(2)+"px");
}

window.addEventListener("load",()=>setTimeout(applyBgFocus,120));
window.addEventListener("resize",()=>setTimeout(applyBgFocus,60));
window.addEventListener("orientationchange",()=>setTimeout(applyBgFocus,120));

document.getElementById("bgImg").addEventListener("load",()=>{
  setTimeout(applyBgFocus,60);
});
</script>
</body>
</html>
