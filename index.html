<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1" />
<title>hanbeam.kr</title>

<style>
:root{
  --maxW: 520px;
  --fontMain: "Presentation", -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo","Noto Sans KR", sans-serif;

  /* ✅ 3px 통일 */
  --gap: 3px;
  --safeB: env(safe-area-inset-bottom);
  --baseBottom: 3px;

  --infoH: 30px;
  --actionH: 92px;
  --branchH: 34.5px;
  --promoH: 113px;

  --gapDotsToPromo: 3px;
  --bgOver: 24px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }
body{
  background:#0b0b0b;
  font-family: var(--fontMain);
  overflow:hidden;
}

.wrap{
  width:100vw;
  height:100vh;
  height:100dvh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
}

.canvas{
  position:relative;
  width:min(100vw, var(--maxW));
  aspect-ratio:390/844;
  max-height: calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  border-radius:22px;
  overflow:hidden;
  background:#000;
  box-shadow: 0 20px 80px rgba(0,0,0,0.45);
  touch-action: pan-y;
}

/* ===== 배경 ===== */
.bg{
  position:absolute;
  inset:0;
  z-index:0;
  overflow:hidden;
  background:#000;
}
.bg img{
  position:absolute;
  top: calc(var(--bgOver) * -1);
  left: calc(var(--bgOver) * -1);
  width: calc(100% + (var(--bgOver) * 2));
  height: calc(100% + (var(--bgOver) * 2));
  object-fit: cover;
  object-position: top center;
  opacity:0;
  transition: opacity .6s ease;
  transform: translate3d(0, var(--bgShift, 0px), 0);
}
.bg img.active{ opacity:1; }

.overlay{
  position:absolute; inset:0; z-index:1;
  pointer-events:none;
  background: linear-gradient(to bottom,
    rgba(0,0,0,0.00) 38%,
    rgba(0,0,0,0.62) 100%);
}

/* ===== glass 완전 제거 ===== */
.glass{
  background: transparent !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* ===== 하단 스택 ===== */

.infoBar{
  position:absolute;
  z-index:10;
  left: calc(16.5 / 390 * 100%);
  width: calc(357 / 390 * 100%);
  height: var(--infoH);
  bottom: calc(var(--baseBottom) + var(--safeB));
  border-radius: 12px;
  background: rgba(0,0,0,0.55);
  color: rgba(255,255,255,0.92);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 11px;
  font-weight: 900;
}

.action-panel{
  position:absolute;
  z-index:10;
  left: calc(16.5 / 390 * 100%);
  width: calc(357 / 390 * 100%);
  height: var(--actionH);
  bottom: calc(var(--baseBottom) + var(--safeB) + var(--infoH) + var(--gap));
  border-radius: 22px;
  padding: 8px 10px;
  background: transparent;
}

.branch{
  position:absolute;
  z-index:10;
  left: calc(16.5 / 390 * 100%);
  width: calc(357 / 390 * 100%);
  height: var(--branchH);
  bottom: calc(
    var(--baseBottom) + var(--safeB)
    + var(--infoH) + var(--gap)
    + var(--actionH) + var(--gap)
  );
  border-radius: 999px;
  display:flex;
  align-items:center;
  justify-content:center;
  color: rgba(255,255,255,0.92);
  text-shadow: 0 1px 8px rgba(0,0,0,0.45);
}

.promoPanel{
  position:absolute;
  z-index:10;
  left: calc(16.5 / 390 * 100%);
  width: calc(357 / 390 * 100%);
  height: var(--promoH);
  bottom: calc(
    var(--baseBottom) + var(--safeB)
    + var(--infoH) + var(--gap)
    + var(--actionH) + var(--gap)
    + var(--branchH) + var(--gap)
  );
  display:flex;
  align-items:center;
  justify-content:center;
}

.dots{
  position:absolute;
  z-index:10;
  left:50%;
  transform:translateX(-50%);
  bottom: calc(
    var(--baseBottom) + var(--safeB)
    + var(--infoH) + var(--gap)
    + var(--actionH) + var(--gap)
    + var(--branchH) + var(--gap)
    + var(--promoH) + var(--gapDotsToPromo)
  );
  display:flex;
  gap:6px;
}
.dot{ width:6px;height:6px;border-radius:50%; background: rgba(255,255,255,0.35); }
.dot.on{ background:#fff; }
</style>
</head>

<body>
<div class="wrap">
<div class="canvas" id="canvas">

<div class="bg">
  <img class="active" src="assets/bg1.webp">
  <img src="assets/bg2.webp">
  <img src="assets/bg3.webp">
  <img src="assets/bg4.webp">
</div>
<div class="overlay"></div>

<div class="dots" id="dots"></div>

<div class="promoPanel" id="promoPanel">
  <img src="assets/promo.webp" style="max-width:100%;max-height:100%;">
</div>

<div class="branch">전국 11개 지점 운영중 | 희망 지점을 선택하세요.</div>
<div class="action-panel"></div>
<div class="infoBar">광고운영사 정보 보기</div>

</div>
</div>

<script>
const DESIGN_REF_Y_RATIO = 1168 / 1688;

function applyBgFocus(){
  const canvas = document.getElementById("canvas");
  const promo  = document.getElementById("promoPanel");
  const active = document.querySelector(".bg img.active");
  if(!canvas || !promo || !active) return;

  const ch = canvas.clientHeight;
  const cw = canvas.clientWidth;
  const over = parseFloat(getComputedStyle(document.documentElement)
                .getPropertyValue("--bgOver")) || 24;

  const iw = active.naturalWidth;
  const ih = active.naturalHeight;
  if(!iw || !ih) return;

  const boxW = cw + over*2;
  const boxH = ch + over*2;
  const scale = Math.max(boxW/iw, boxH/ih);
  const dispH = ih * scale;

  const refY = dispH * DESIGN_REF_Y_RATIO;
  const targetY = promo.offsetTop;

  let shift = (targetY + over) - refY;
  const minShift = (ch + over) - dispH;
  const maxShift = over;

  if(shift < minShift) shift = minShift;
  if(shift > maxShift) shift = maxShift;

  active.style.setProperty("--bgShift", shift.toFixed(2)+"px");
}

window.addEventListener("load",()=>setTimeout(applyBgFocus,120));
window.addEventListener("resize",()=>setTimeout(applyBgFocus,60));
</script>

</body>
</html>
